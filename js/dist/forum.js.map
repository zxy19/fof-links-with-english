{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/links/webpack/bootstrap","webpack://@fof/links/webpack/runtime/compat get default export","webpack://@fof/links/webpack/runtime/define property getters","webpack://@fof/links/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/links/webpack/runtime/make namespace object","webpack://@fof/links/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/links/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/links/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@fof/links/./src/common/utils/sortLinks.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/links/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/links/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/links/./src/forum/components/LinkItem.tsx","webpack://@fof/links/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/links/external root \"flarum.core.compat['common/components/SplitDropdown']\"","webpack://@fof/links/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/links/./src/forum/components/LinkDropdown.js","webpack://@fof/links/./src/forum/components/index.ts","webpack://@fof/links/./src/common/utils/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/links/./src/common/models/Link.ts","webpack://@fof/links/./src/common/models/index.ts","webpack://@fof/links/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/links/./src/common/extend.ts","webpack://@fof/links/./src/forum/extend.ts","webpack://@fof/links/./src/forum/index.ts","webpack://@fof/links/./src/forum/extendHeader.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderPrimary'];","export default function sortLinks(links) {\r\n  return links.slice(0).sort((a, b) => {\r\n    const aPos = a.position();\r\n    const bPos = b.position();\r\n    return aPos > bPos ? 1 : aPos < bPos ? -1 : 0;\r\n  });\r\n}\r\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","/* global m*/\r\n\r\nimport app from 'flarum/forum/app';\r\nimport Link from 'flarum/common/components/Link';\r\nimport LinkModel from '../../common/models/Link';\r\nimport LinkButton from 'flarum/common/components/LinkButton';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Separator from 'flarum/common/components/Separator';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport type { IButtonAttrs } from 'flarum/common/components/Button';\r\nimport type Mithril from 'mithril';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nexport interface ILinkItemAttrs extends IButtonAttrs {\r\n  link: LinkModel;\r\n  className?: string;\r\n  inDropdown?: boolean;\r\n  isDropdownButton?: boolean;\r\n}\r\nfunction chooseTitle(link: LinkModel) {\r\n  if (app.translator.getLocale() === \"en\") {\r\n    return link.title_english();\r\n  } else {\r\n    return link.title();\r\n  }\r\n}\r\nexport default class LinkItem extends LinkButton {\r\n  // Just definitions to satisfy TypeScript\r\n  attrs!: ILinkItemAttrs;\r\n\r\n  view(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\r\n    if (this.isLabel) return this.labelView(vnode);\r\n\r\n    return this.linkView(vnode);\r\n  }\r\n\r\n  labelView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\r\n    const link = this.attrs.link;\r\n\r\n    const LinkLabelNode = this.attrs.inDropdown ? 'span' : Button;\r\n\r\n    return (\r\n      <>\r\n        {this.attrs.inDropdown && <Separator />}\r\n        <LinkLabelNode\r\n          class={classList(this.class, 'LinksButton--label')}\r\n          onclick={(e: MouseEvent) => {\r\n            if (this.attrs.inDropdown) {\r\n              // don't close dropdown when clicking label\r\n              e.stopPropagation();\r\n            }\r\n          }}\r\n          data-toggle={this.attrs.isDropdownButton ? 'dropdown' : undefined}\r\n        >\r\n          {this.icon}\r\n          <span className=\"LinksButton-title\">{chooseTitle(link)}</span>\r\n        </LinkLabelNode>\r\n        {this.attrs.inDropdown && <Separator />}\r\n      </>\r\n    );\r\n  }\r\n\r\n  linkView(vnode: Mithril.Vnode<ILinkItemAttrs, never>): JSX.Element {\r\n    const link = this.attrs.link;\r\n\r\n    const linkAttrs = {\r\n      className: this.class,\r\n      rel: this.rel,\r\n      target: this.linkTarget,\r\n      external: link.isNewtab() ? false : !link.isInternal(),\r\n      href: this.linkHref,\r\n    };\r\n\r\n    return (\r\n      <Link {...linkAttrs}>\r\n        {this.icon}\r\n        <span className=\"LinksButton-title\">{link.title()}</span>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  get isInternal(): boolean {\r\n    const link = this.attrs.link;\r\n\r\n    return link.isInternal() && !link.isNewtab();\r\n  }\r\n\r\n  get isLabel(): boolean {\r\n    return this.attrs.link.url().length === 0;\r\n  }\r\n\r\n  get linkHref(): string {\r\n    const link = this.attrs.link;\r\n    const url = link.url();\r\n\r\n    if (url.startsWith('/') && link.isInternal()) {\r\n      return app.forum.attribute('baseUrl') + url;\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  get icon(): Mithril.Child | null {\r\n    const link = this.attrs.link;\r\n    const iconClass = link.icon();\r\n\r\n    if (iconClass) {\r\n      return icon(iconClass, { className: 'Button-icon LinksButton-icon' });\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  get rel(): string | undefined {\r\n    // Prevent security risk on older browsers.\r\n    // Modern browsers now have `noopener` by default and\r\n    // require `opener` to enable `window.opener`.\r\n    //\r\n    // Learn more:\r\n    // https://web.dev/external-anchors-use-rel-noopener\r\n\r\n    return classList(this.attrs.link.isNewtab() && 'noopener noreferrer', this.attrs.link.useRelMe() && 'me') || undefined;\r\n  }\r\n\r\n  get class(): string {\r\n    return classList('LinksButton', this.attrs.className || 'Button Button--link', {\r\n      'LinksButton--inDropdown': this.attrs.inDropdown,\r\n      active: this.isLinkCurrentPage,\r\n    });\r\n  }\r\n\r\n  get isLinkCurrentPage(): boolean {\r\n    const link = this.attrs.link;\r\n\r\n    if (!link.isInternal()) return false;\r\n\r\n    const base = app.forum.attribute<string>('baseUrl');\r\n\r\n    // Mithril returns the current path relative to the origin, which isn't necessarily the base forum URL\r\n    const currentUrl = new URL(m.route.get() || '/', base);\r\n    const currentPath = currentUrl.href.replace(base, '');\r\n\r\n    // The link from `this.linkHref` should already be absolute, but we'll make sure\r\n    const linkUrl = new URL(this.linkHref, base);\r\n    const linkPath = linkUrl.href.replace(base, '');\r\n\r\n    // The link is active if the current path starts with the link path.\r\n    // Except if it's the base url, in which case only an exact match is considered active\r\n    return currentPath.indexOf(linkPath) === 0 && (currentPath === '/' || linkPath !== '/');\r\n  }\r\n\r\n  get linkTarget(): string | undefined {\r\n    const link = this.attrs.link;\r\n\r\n    if (this.isInternal) return undefined;\r\n\r\n    return link.isNewtab() ? '_blank' : undefined;\r\n  }\r\n}\r\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SplitDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flarum/forum/app';\r\n\r\nimport SplitDropdown from 'flarum/common/components/SplitDropdown';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport classList from 'flarum/common/utils/classList';\r\n\r\nimport LinkItem from './LinkItem';\r\nimport sortLinks from '../../common/utils/sortLinks';\r\nexport default class LinkDropdown extends SplitDropdown {\r\n  static initAttrs(attrs) {\r\n    super.initAttrs(attrs);\r\n\r\n    attrs.className += ' LinkDropdown';\r\n    attrs.buttonClassName += ' Button--link';\r\n  }\r\n\r\n  view(vnode) {\r\n    const children = this.items().toArray();\r\n\r\n    return super.view({ ...vnode, children });\r\n  }\r\n\r\n  getButton(children) {\r\n    // Make a copy of the attrs of the first child component. We will assign\r\n    // these attrs to a new button, so that it has exactly the same behaviour as\r\n    // the first child.\r\n    const firstChild = this.getFirstChild(children);\r\n    firstChild.attrs.className = classList(firstChild.attrs.className, 'SplitDropdown-button Button', this.attrs.buttonClassName);\r\n    firstChild.attrs.isDropdownButton = true;\r\n\r\n    return [\r\n      firstChild,\r\n      <button className={classList('Dropdown-toggle', 'Button', 'Button--icon', this.attrs.buttonClassName)} data-toggle=\"dropdown\">\r\n        {icon('fas fa-caret-down', { className: 'Button-caret' })}\r\n      </button>,\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the contents of the dropdown menu.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  items() {\r\n    const items = new ItemList();\r\n    const parent = this.attrs.link;\r\n\r\n    items.add(`link${parent.id()}`, LinkItem.component({ link: parent }));\r\n\r\n    sortLinks(app.store.all('links'))\r\n      .filter((link) => link.parent() === parent)\r\n      .forEach((child) => {\r\n        items.add(`link${parent.id()}-${child.id()}`, LinkItem.component({ link: child, inDropdown: true }));\r\n      });\r\n\r\n    return items;\r\n  }\r\n}\r\n","import LinkDropdown from './LinkDropdown';\r\nimport LinkItem from './LinkItem';\r\n\r\nexport const components = {\r\n  LinkDropdown,\r\n  LinkItem,\r\n};\r\n","import sortLinks from './sortLinks';\r\n\r\nexport const utils = {\r\n  sortLinks,\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\r\n\r\nexport default class Link extends Model {\r\n  title() {\r\n    return Model.attribute<string>('title').call(this);\r\n  }\r\n  title_english() {\r\n    return Model.attribute<string>('title_english').call(this);\r\n  }\r\n  icon() {\r\n    return Model.attribute<string>('icon').call(this);\r\n  }\r\n\r\n  type() {\r\n    return Model.attribute<string>('type').call(this);\r\n  }\r\n\r\n  url() {\r\n    return Model.attribute<string>('url').call(this);\r\n  }\r\n\r\n  position() {\r\n    return Model.attribute<number | null | undefined>('position').call(this);\r\n  }\r\n\r\n  isInternal() {\r\n    return Model.attribute<boolean>('isInternal').call(this);\r\n  }\r\n\r\n  isNewtab() {\r\n    return Model.attribute<boolean>('isNewtab').call(this);\r\n  }\r\n\r\n  useRelMe() {\r\n    return Model.attribute<boolean>('useRelMe').call(this);\r\n  }\r\n\r\n  isChild() {\r\n    return Model.attribute<boolean>('isChild').call(this);\r\n  }\r\n\r\n  parent() {\r\n    return Model.hasOne<Link>('parent').call(this);\r\n  }\r\n\r\n  visibility() {\r\n    return Model.attribute<string>('visibility').call(this);\r\n  }\r\n}\r\n","import Link from './Link';\r\n\r\nexport const models = {\r\n  Link,\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","import Extend from 'flarum/common/extenders';\r\nimport Link from './models/Link';\r\n\r\nexport default [\r\n  new Extend.Store() //\r\n    .add('links', Link),\r\n];\r\n","import commonExtend from '../common/extend';\r\n\r\nexport default [...commonExtend];\r\n","import app from 'flarum/forum/app';\r\nimport extendHeader from './extendHeader';\r\n\r\nexport * from './components';\r\nexport * from '../common/utils';\r\nexport * from '../common/models';\r\n\r\nexport { default as extend } from './extend';\r\n\r\napp.initializers.add('fof-links', () => {\r\n  extendHeader();\r\n});\r\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport sortLinks from '../common/utils/sortLinks';\r\nimport type Mithril from 'mithril';\r\nimport Link from '../common/models/Link';\r\nimport LinkItem from './components/LinkItem';\r\nimport LinkDropdown from './components/LinkDropdown';\r\n\r\nexport default function extendHeader() {\r\n  extend(HeaderPrimary.prototype, 'items', function (items: ItemList<Mithril.Children>) {\r\n    const links = app.store.all<Link>('links').filter((link) => !link.isChild());\r\n    const addLink = (parent: Link | null | undefined) => {\r\n      const hasChildren = app.store.all<Link>('links').some((link) => link.parent() == parent);\r\n\r\n      items.add(`link${parent?.id()}`, hasChildren ? LinkDropdown.component({ link: parent }) : LinkItem.component({ link: parent }));\r\n    };\r\n\r\n    sortLinks(links).map(addLink);\r\n  });\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","sortLinks","links","slice","sort","b","aPos","position","bPos","_typeof","iterator","constructor","toPropertyKey","t","i","r","e","toPrimitive","TypeError","String","_defineProperties","length","configurable","writable","_setPrototypeOf","setPrototypeOf","bind","__proto__","_inheritsLoose","create","LinkItem","_LinkButton","_this","_len","arguments","args","Array","_key","apply","concat","attrs","_proto","view","vnode","this","isLabel","labelView","linkView","_this2","link","LinkLabelNode","inDropdown","Button","m","'['","Separator","class","classList","onclick","stopPropagation","isDropdownButton","undefined","icon","className","app","getLocale","title_english","title","chooseTitle","linkAttrs","rel","target","linkTarget","external","isNewtab","isInternal","href","linkHref","Link","url","startsWith","attribute","iconClass","useRelMe","active","isLinkCurrentPage","base","currentPath","URL","route","replace","linkPath","indexOf","LinkButton","_extends","assign","n","LinkDropdown","_SplitDropdown","initAttrs","buttonClassName","children","items","toArray","getButton","firstChild","getFirstChild","ItemList","parent","add","id","component","all","filter","forEach","child","SplitDropdown","components","utils","_Model","Model","type","isChild","visibility","models","Extend","commonExtend","extend","HeaderPrimary","map","hasChildren","some"],"sourceRoot":""}